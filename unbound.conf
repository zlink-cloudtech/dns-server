server:
    # 监听所有 IPv4 地址的 DNS 请求（可改为特定IP，如 192.168.1.10）
    interface: 0.0.0.0
    # 如果你也想监听 IPv6，取消下面这行的注释
    # interface: ::0

    # 启用 DNSSEC 验证，确保 DNS 响应未被篡改
    auto-trust-anchor-file: "/etc/unbound/root.key"

    # 提升隐私：减少查询时暴露的信息
    qname-minimisation: yes

    # 允许来自任何 IP 的客户端查询（局域网或公网，按需设置）
    # 如果只想允许局域网，例如 192.168.1.0/24，可使用如下行（取消注释并修改）
    # access-control: 192.168.1.0/24 allow
    # access-control: 127.0.0.1 allow

    # 默认允许所有（生产环境请务必限制！）
    access-control: 0.0.0.0/0 allow

    # 启用 IPv4 查询
    do-ip4: yes
    # 禁用 IPv6 查询（除非你需要）
    do-ip6: no

    # 启用 UDP 和 TCP 查询
    do-udp: yes
    do-tcp: yes

    # 使用多少个线程处理请求（根据 CPU 核心数调整，树莓派通常 2~4）
    num-threads: 2

    # 提高性能的缓冲区设置
    so-rcvbuf: 4m
    so-sndbuf: 4m

    # 缓存设置
    cache-max-ttl: 86400        # 最大缓存时间（秒），例如 24 小时
    cache-min-ttl: 300          # 最小缓存时间
    prefetch: yes               # 预取可能即将过期的记录，提升用户体验
    prefetch-key: yes

    # 日志级别（调试用，生产可设为 0 或 1）
    verbosity: 2
    use-syslog: no

    include: "/etc/unbound/unbound.conf.d/*.conf"

remote-control:
    # allows controling unbound using "unbound-control"
    control-enable: yes
    control-cert-file: "/etc/unbound/unbound_control.pem"
    control-key-file: "/etc/unbound/unbound_control.key"
    server-cert-file: "/etc/unbound/unbound_server.pem"
    server-key-file: "/etc/unbound/unbound_server.key"